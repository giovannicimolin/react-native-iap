<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/react-native-iap/blog/rss.xml" title="React Native IAP Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/react-native-iap/blog/atom.xml" title="React Native IAP Blog Atom Feed"><title data-react-helmet="true">Available Methods | React Native IAP</title><meta data-react-helmet="true" property="og:url" content="http://giovannicimolin.github.io/react-native-iap/docs/api_reference/methods"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Available Methods | React Native IAP"><meta data-react-helmet="true" name="description" content="| Method | Result | Description |"><meta data-react-helmet="true" property="og:description" content="| Method | Result | Description |"><link data-react-helmet="true" rel="shortcut icon" href="/react-native-iap/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://giovannicimolin.github.io/react-native-iap/docs/api_reference/methods"><link data-react-helmet="true" rel="alternate" href="http://giovannicimolin.github.io/react-native-iap/docs/api_reference/methods" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://giovannicimolin.github.io/react-native-iap/docs/api_reference/methods" hreflang="x-default"><link rel="stylesheet" href="/react-native-iap/assets/css/styles.36aa7f87.css">
<link rel="preload" href="/react-native-iap/assets/js/runtime~main.90adb6f1.js" as="script">
<link rel="preload" href="/react-native-iap/assets/js/main.6e034e39.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/react-native-iap/"><strong class="navbar__title">React Native IAP</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/react-native-iap/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/dooboolab/react-native-iap" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/react-native-iap/"><strong class="navbar__title">React Native IAP</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/react-native-iap/docs/intro">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/dooboolab/react-native-iap" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/react-native-iap/docs/intro">React Native IAP</a></li><li class="menu__list-item"><a class="menu__link" href="/react-native-iap/docs/installing">Installing</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Usage instructions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-iap/docs/usage_instructions/retrieve_available">Retrieving available items</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-iap/docs/usage_instructions/purchase">Making a purchase</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-iap/docs/usage_instructions/restoring_purchases">Restoring purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-iap/docs/usage_instructions/receipt_validation">Validating receipts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-iap/docs/usage_instructions/using_hooks">Using hooks</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-iap/docs/api_reference/available_purchase">AvailablePurchase</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/react-native-iap/docs/api_reference/methods">Available Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-iap/docs/api_reference/product">Product</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/react-native-iap/docs/faq">Frequently Asked Questions</a></li><li class="menu__list-item"><a class="menu__link" href="/react-native-iap/docs/troubleshooting">Troubleshooting</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Available Methods</h1></header><div class="markdown"><table><thead><tr><th>Method</th><th>Result</th><th>Description</th><th></th></tr></thead><tbody><tr><td><code>initConnection()</code></td><td><code>Promise&lt;boolean&gt;</code></td><td>Init IAP module. On Android this can be called to preload the connection to Play Services. On iOS, it will simply call <code>canMakePayments</code> method and return value which is required for the listeners to work properly.</td><td></td></tr><tr><td><code>purchaseUpdatedListener((purchase: ProductPurchase) =&gt; {})</code></td><td><code>EmitterSubscription</code></td><td>Register a callback that gets called when the store has any updates to purchases that have not yet been finished, consumed or acknowledged. Returns a React Native <code>EmitterSubscription</code> on which you can call <code>.remove()</code> to stop receiving updates. Register you listener as soon as possible and react to updates at all times.</td><td></td></tr><tr><td><code>purchaseErrorListener((error: PurchaseError) =&gt; {})</code></td><td><code>EmitterSubscription</code></td><td>Register a callback that gets called when there has been an error with a purchase. Returns a React Native <code>EmitterSubscription</code> on which you can call <code>.remove()</code> to stop receiving updates.</td><td></td></tr><tr><td><code>getProducts(skus: string[])</code><ul><li>skus: array of Product ID/sku</li></ul></td><td><code>Promise&lt;Product[]&gt;</code></td><td>Get a list of products (consumable and non-consumable items, but not subscriptions). Note: With before <code>iOS 11.2</code>, this method <em>will</em> also return subscriptions if they are included in your list of SKUs. This is because we cannot differentiate between IAP products and subscriptions prior to <code>iOS 11.2</code>.</td><td></td></tr><tr><td><code>getSubscriptions(skus: string[])</code><ul><li>skus: array of Subscription ID/sku</li></ul></td><td><code>Promise&lt;Subscription[]&gt;</code></td><td>Get a list of subscriptions. Note: With before <code>iOS 11.2</code>, this method <em>will</em> also return products if they are included in your list of SKUs. This is because we cannot differentiate between IAP products and subscriptions prior to <code>iOS 11.2</code>.</td><td></td></tr><tr><td><code>getPurchaseHistory()</code></td><td><code>Promise&lt;Purchase&gt;</code></td><td>Gets an inventory of purchases made by the user regardless of consumption status (where possible).</td><td></td></tr><tr><td><code>getAvailablePurchases()</code></td><td><code>Promise&lt;Purchase[]&gt;</code></td><td>Get all purchases made by the user (either non-consumable, or haven&#x27;t been consumed yet). On Android, it can be called at app launch, but on iOS, only at restoring purchase is recommended (See: <a href="https://github.com/dooboolab/react-native-iap/issues/747" target="_blank" rel="noopener noreferrer">#747</a>).</td><td></td></tr><tr><td><code>requestPurchase(sku: string, andDangerouslyFinishTransactionAutomatically: boolean, obfuscatedAccountIdAndroid: string, obfuscatedProfileIdAndroid: string)</code><ul></ul></td><td><code>Promise&lt;ProductPurchase&gt;</code></td><td>Request a purchase. <code>purchaseUpdatedListener</code> will receive the result.<br> <code>andDangerouslyFinishTransactionAutomatically</code> defaults to <code>true</code> for backwards compatibility but this is deprecated and you should set it to false once you&#x27;re <a href="/react-native-iap/docs/usage_instructions/purchase">manually finishing your transactions</a>.</td><td></td></tr><tr><td><code>requestPurchaseWithQuantityIOS(sku: string, quantity: number)</code><ul><li>sku: product ID/sku</li><li>quantity: Quantity</li></ul></td><td><code>void</code></td><td><strong>iOS only</strong> Buy a product with a specified quantity. <code>purchaseUpdatedListener</code> will receive the result</td><td></td></tr><tr><td><em>*deprecated</em> <del><code>buySubscription(sku: string)</code></del><ul><li>sku: subscription ID/sku</li></ul></td><td><code>void</code></td><td>Create (buy) a subscription to a sku.</td><td></td></tr><tr><td><code>requestSubscription(sku: string, andDangerouslyFinishTransactionAutomaticallyIOS: boolean, oldSkuAndroid: string, purchaseTokenAndroid: string, prorationModeAndroid: string, obfuscatedAccountIdAndroid: string, obfuscatedProfileIdAndroid: string)</code><ul><li>sku: subscription ID/sku</li></ul></td><td><code>void</code></td><td>Create (buy) a subscription to a sku.</td><td></td></tr><tr><td><code>clearTransactionIOS()</code></td><td><code>void</code></td><td><strong>iOS only</strong> Clear up unfinished transanctions which sometimes cause problems. Read more in <a href="https://github.com/dooboolab/react-native-iap/issues/257" target="_blank" rel="noopener noreferrer">#257</a>, <a href="https://github.com/dooboolab/react-native-iap/issues/801" target="_blank" rel="noopener noreferrer">#801</a>.</td><td></td></tr><tr><td><code>clearProductsIOS()</code></td><td><code>void</code></td><td><strong>iOS only</strong> Clear all products and subscriptions. Read more in below README.</td><td></td></tr><tr><td><code>getReceiptIOS()</code></td><td><code>Promise&lt;string&gt;</code></td><td><strong>iOS only</strong> Get the current receipt.</td><td></td></tr><tr><td><code>getPendingPurchasesIOS()</code></td><td><code>Promise&lt;ProductPurchase[]&gt;</code></td><td><strong>IOS only</strong> Gets all the transactions which are pending to be finished.</td><td></td></tr><tr><td><code>validateReceiptIos(body: Record&lt;string, unknown&gt;, devMode: boolean)</code><ul><li>body: receiptBody</li><li>devMode: isTest</li></ul></td><td><code>Object\|boolean</code></td><td><strong>iOS only</strong> Validate receipt.</td><td></td></tr><tr><td><code>presentCodeRedemptionSheetIOS()</code></td><td><code>Promise&lt;null&gt;</code></td><td><strong>iOS only</strong> Availability: <code>iOS 14.0+</code> Displays a sheet that enables users to redeem subscription offer codes that you generated in App Store Connect.</td><td></td></tr><tr><td><code>endConnection()</code></td><td><code>Promise&lt;void&gt;</code></td><td>End billing connection.</td><td></td></tr><tr><td><code>consumeAllItemsAndroid()</code></td><td><code>Promise&lt;void&gt;</code></td><td><strong>Android only</strong> Consume all items so they are able to buy again. ⚠️ Use in dev only (as you should deliver the purchased feature BEFORE consuming it)</td><td></td></tr><tr><td><code>flushFailedPurchasesCachedAsPendingAndroid()</code></td><td><code>Promise&lt;void&gt;</code></td><td><strong>Android only</strong> Consume all &#x27;ghost&#x27; purchases (that is, pending payment that already failed but is still marked as pending in Play Store cache)</td><td></td></tr><tr><td><code>consumePurchaseAndroid(token: string, payload?: string)</code><ul><li>token: purchase token</li><li>payload: developerPayload</li></ul></td><td><code>void</code></td><td><strong>Android only</strong> Finish a purchase. All purchases should be finished once you have delivered the purchased items. E.g. by recording the purchase in your database or on your server.</td><td></td></tr><tr><td><code>acknowledgePurchaseAndroid(token: string, payload?: string)</code><ul><li>token: purchase token</li><li>payload: developerPayload</li></ul></td><td><code>Promise&lt;PurchaseResult&gt;</code></td><td><strong>Android only</strong> Acknowledge a product. Like above for non-consumables. Use <code>finishTransaction</code> instead for both platforms since version 4.1.0 or later.</td><td></td></tr><tr><td><code>consumePurchaseAndroid(token: string, payload?: string)</code><ul><li>token: purchase token</li><li>payload: developerPayload</li></ul></td><td><code>Promise&lt;PurchaseResult&gt;</code></td><td><strong>Android only</strong> Consume a product. Like above for consumables. Use <code>finishTransaction</code> instead for both platforms since version 4.1.0 or later.</td><td></td></tr><tr><td><code>finishTransactionIOS(transactionId: string)</code><ul><li>transactionId: the transactionId that you would like to finish.</li></ul></td><td><code>Promise&lt;void&gt;</code></td><td><strong>iOS only</strong> Finish a transaction. Use <code>finishTransaction</code> instead for both platforms since version 4.1.0 or later.</td><td></td></tr><tr><td><code>finishTransaction(purchase: InAppPurchase/ProductPurchase, isConsumable?: boolean, developerPayloadAndroid?: string)</code><ul><li>purchase: purchase object</li><li>isConsumable?: specify whether the product is a consumable</li><li>developerPayloadAndroid: developerPayload</li></ul></td><td><code>Promise&lt;void&gt;</code></td><td>This method works for both platforms and is recommended since version 4.1.0 or later. Equal to <code>finishTransactionIOS</code> + <code>consumePurchaseAndroid</code> and <code>acknowledgePurchaseAndroid</code>.</td><td></td></tr><tr><td><em>*deprecated</em> <del><code>buySubscription(sku: string, prevSku?: string, mode?: number)</code></del><ul><li>sku: subscription ID/sku</li><li>prevSku: old subscription ID/sku (optional)</li><li>mode: proration mode (optional)</li></ul></td><td><code>Promise&lt;Purchase&gt;</code></td><td><strong>Android only</strong> Create (buy) a subscription to a sku. For upgrading/downgrading subscription on Android pass the second parameter with current subscription ID, on iOS this is handled automatically by store. You can also optionally pass in a proration mode integer for upgrading/downgrading subscriptions on Android</td><td></td></tr><tr><td><code>validateReceiptAndroid(bundleId: string, productId: string, productToken: string, accessToken: string)</code> <ul><li>bundleId: the packageName</li><li>productId: productId</li><li>productToken: productToken</li><li>accessToken: accessToken</li><li>isSubscription: isSubscription</li></ul></td><td><code>Object\|boolean</code></td><td><strong>Android only</strong> Validate receipt.</td><td></td></tr></tbody></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/api_reference/methods.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/react-native-iap/docs/api_reference/available_purchase"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« AvailablePurchase</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/react-native-iap/docs/api_reference/product"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Product »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">GitHub</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/dooboolab/react-native-iap/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues</a></li><li class="footer__item"><a href="https://github.com/dooboolab/react-native-iap/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions</a></li><li class="footer__item"><a href="https://github.com/dooboolab/react-native-iap/pulls" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pull requests</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">This is an Open Source project using the MIT license. Documentation built with Docusaurus.</div></div></div></footer></div>
<script src="/react-native-iap/assets/js/runtime~main.90adb6f1.js"></script>
<script src="/react-native-iap/assets/js/main.6e034e39.js"></script>
</body>
</html>